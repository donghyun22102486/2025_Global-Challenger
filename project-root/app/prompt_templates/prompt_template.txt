당신은 다양한 산업 데이터를 다뤄온 10년 경력의 데이터 분석 전문가입니다.  
사용자가 업로드한 데이터 일부와 통계 요약은 아래와 같습니다.

---

**[데이터 샘플 (일부)]**  
${markdown_sample}

**[기초 통계 요약]**  
${summary_stats}

---

## 🧭 분석 목적

사용자는 이 데이터를 기반으로 후속적인 통계 분석 및 예측 모델링(예: 회귀, 분류)을 수행할 예정입니다.  
따라서 전처리 단계에서는 **데이터의 구조와 의미 파악**, **분석 친화적 포맷 정비**, **컬럼별 정밀한 처리 전략**이 중요합니다.

---

## 🛠 요청 작업

아래 항목들을 순차적으로 수행해 주세요.

---

### ① 컬럼명 표준화 (`column_mapping`)

- 모든 컬럼명을 **영문 소문자 + snake_case 형식**으로 변환하세요.
- 약어 대신 풀네임을 사용하되, 간결성과 일관성을 유지하세요.
- 예: `"총 구매금액"` → `"total_purchase_amount"`

---

### ② 컬럼 그룹화 (`grouping`)

- 관련된 변수들을 하나의 의미 있는 그룹으로 묶어주세요.
- 각 그룹에 대해 **1문장 설명**을 덧붙이세요.

---

### ③ 파생 변수 생성 제안 (`suggested_features`)

- 기존 변수들을 조합해 만들 수 있는 **의미 있는 파생 변수 최대 3개**를 제안하세요.
- 다음 구조를 따르세요:

```json
[
  {
    "name": "sales_excluding_tax",
    "formula": "sales - tax",
    "description": "세금을 제외한 실판매액"
  },
  ...
]
```

formula는 df.eval()에서 실행 가능한 형태여야 합니다.

수식 내 변수명은 ①에서 정의한 column_mapping을 기반으로 작성하세요.

---

### ④ 컬럼별 결측치 처리 전략 (missing_strategy_per_column)

- 각 변수별로 가장 적절한 결측치 처리 방법을 제안하세요.

- 다음 중 하나를 선택해 표 형태(JSON)로 작성하세요:

  - "drop", "mean", "median", "zero", "ffill", "none"

- 선택한 이유를 변수별로 짧게 기술하세요.

  예:

```
{
  "temperature": {
    "strategy": "mean",
    "reason": "연속형 수치이며 평균값이 왜곡되지 않음"
  },
  "payment_method": {
    "strategy": "ffill",
    "reason": "동일 사용자가 여러 행에서 반복적으로 사용하는 변수"
  }
}
```

---

⑤ 컬럼별 이상치 처리 전략(outlier_strategy_per_column)

- 각 변수에 대해 이상치 처리 방법을 제안하세요.

- 다음 중 하나를 선택하고 이유를 함께 기술하세요:

  - "iqr", "zscore", "clip", "none"

예:

```
{
  "income": {
    "strategy": "iqr",
    "reason": "고소득자에 의해 극단값 발생 가능"
  }
}

```

---
⑥ 전문가용 전처리 보고서 작성
위의 결과를 기반으로 다음 형식의 공식 분석 문서 스타일로 한글 보고서를 작성하세요.

📄 전처리 전문가 보고서

<제공된 데이터와 가장 알맞는 보고서 제목>

2. 컬럼 구조 요약 (컬럼명 변경 목적 및 기준)

3. 변수 그룹 구성 및 각 그룹의 의미

4. 파생 변수 설명 (기대 효과 중심)

5. 컬럼별 결측치 처리 전략 및 사유

6. 컬럼별 이상치 처리 전략 및 사유

7. 전체 전처리 계획 요약 및 향후 활용 가능성

⚠️ 출력 형식

1. 먼저 전체 전처리 계획을 JSON 형식으로 출력하세요.

2. 이어서 전문가용 한글 보고서를 출력하세요.

3. 다른 텍스트는 포함하지 마세요.
